@{
    ViewData["Title"] = "Products Page";
}

@model ProductsModel

<div class="d-flex justify-content-between">
    <div>
        <h1>PRODUCTS</h1></div>
    <div> <a class="btn-info btn text-white" href="/Fridge/Fridges">Back to fridges</a></div>
</div>

<ejs-grid id="Grid" dataSource="Model.Products" allowPaging="true" class="center">
    <e-grid-pagesettings pageSize="13"></e-grid-pagesettings>
    <e-grid-columns>
        <e-grid-column field="Name" headerText="Name" textAlign="Center"></e-grid-column>
        <e-grid-column field="CaloriesCount" headerText="Calories Count" textAlign="Center"></e-grid-column>
          <e-grid-column field="Quantity" headerText="Quantity" textAlign="Center"></e-grid-column>
        <e-grid-column field="ExpiryDate" headerText="Expiry Date" format="dd.MM.yyyy" textAlign="Center"></e-grid-column>
        <e-grid-column headerText="" template='<a class="text-underline-hover text-info" href="/Product/UpdatingProduct?productId=${ProductId}&fridgeId=@Model.FridgeId">Update</a>' textAlign="Center"></e-grid-column>
        <e-grid-column headerText="" template='<a class="text-underline-hover text-danger" href="#" onClick="DeleteProductByIndex(`${ProductId}`)">Delete</a>' textAlign="Center"></e-grid-column>
    </e-grid-columns>
</ejs-grid>

<script>
 function DeleteProductByIndex(productId){
 
    console.log(productId);
     if (confirm("Do you want delete product?") === false)
            return;
        const url = `/Product/DeleteProduct?productId=${productId}`;
        fetch(url)
             .then((response) => {
                   document.location.href = "/Product/Products?fridgeId=@Model.FridgeId";
             });
} 
</script>

